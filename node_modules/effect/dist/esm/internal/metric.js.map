{"version":3,"file":"metric.js","names":["Clock","Duration","constVoid","dual","identity","pipe","globalValue","pipeArguments","ReadonlyArray","Cause","_effect","core","metricBoundaries","metricKey","metricLabel","metricRegistry","MetricSymbolKey","MetricTypeId","Symbol","for","metricVariance","_Type","_","_In","_Out","globalMetricRegistry","make","keyType","unsafeUpdate","unsafeValue","metric","Object","assign","effect","tap","a","update","register","arguments","mapInput","self","f","input","extraTags","counter","name","options","fromMetricKey","frequency","description","withConstantInput","key","untaggedHook","hookCache","WeakMap","hook","length","undefined","get","taggedWithLabels","set","gauge","histogram","boundaries","increment","bigint","BigInt","incrementBy","amount","map","mapType","value","succeed","out","sync","evaluate","summary","withNow","summaryTimestamp","tagged","taggedWithLabelsInput","union","extraTags1","timer","exponential","start","factor","count","base","toMillis","timerWithBoundaries","fromIterable","trackAll","matchCauseEffect","onFailure","cause","zipRight","failCause","onSuccess","trackDefect","trackDefectWith","updater","defect","tapDefect","forEachSequentialDiscard","defects","trackDuration","trackDurationWith","clockWith","clock","startTime","unsafeCurrentTimeNanos","endTime","duration","nanos","trackError","trackErrorWith","error","tapError","trackSuccess","trackSuccessWith","fiberRefGetWith","currentMetricLabels","tags","Date","now","zip","that","l","r","unsafeSnapshot","snapshot"],"sources":["../../../src/internal/metric.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}